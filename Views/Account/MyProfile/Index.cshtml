@model MangoTaikaDistrict.Domain.Entities.Scout
@{
    ViewData["Title"] = "Mon profil";
    Layout = "_Layout";
}

<div class="container mb-5">
    <h2 class="fw-bold mb-4"><i class="bi bi-person-circle me-2 text-primary"></i>Mon profil scout</h2>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle me-2"></i>@TempData["Success"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>@TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <form method="post" asp-action="Update">
        <input type="hidden" asp-for="Id" />

        <div class="card-modern card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i>Informations personnelles</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Nom</label>
                        <input type="text" class="form-control" value="@Model.Nom" disabled />
                        <small class="text-muted">Contactez un administrateur pour modifier</small>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Prénoms</label>
                        <input type="text" class="form-control" value="@Model.Prenoms" disabled />
                        <small class="text-muted">Contactez un administrateur pour modifier</small>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Matricule</label>
                        <input type="text" class="form-control" value="@(Model.Matricule ?? "-")" disabled />
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Groupe</label>
                        <input type="text" class="form-control" value="@Model.Groupe.Nom" disabled />
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Branche</label>
                        <input type="text" class="form-control" value="@(Model.Unite?.Branche ?? "-")" disabled />
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-semibold">Date de naissance</label>
                        <input type="text" class="form-control" value="@(Model.DateNaissance?.ToString("dd/MM/yyyy") ?? "-")" disabled />
                    </div>
                </div>
            </div>
        </div>

        <div class="card-modern card mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="bi bi-geo-alt me-2"></i>Adresse et localisation</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="Adresse" class="form-label fw-semibold">Adresse</label>
                    <textarea asp-for="Adresse" class="form-control form-modern" rows="3" placeholder="Votre adresse complète"></textarea>
                    <span asp-validation-for="Adresse" class="text-danger"></span>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label asp-for="GpsLat" class="form-label fw-semibold">Latitude GPS (optionnel)</label>
                        <input asp-for="GpsLat" type="number" step="0.000001" class="form-control form-modern" placeholder="Ex: 5.3600" />
                        <span asp-validation-for="GpsLat" class="text-danger"></span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label asp-for="GpsLng" class="form-label fw-semibold">Longitude GPS (optionnel)</label>
                        <input asp-for="GpsLng" type="number" step="0.000001" class="form-control form-modern" placeholder="Ex: -4.0083" />
                        <span asp-validation-for="GpsLng" class="text-danger"></span>
                    </div>
                </div>
                <small class="text-muted">
                    <i class="bi bi-info-circle me-1"></i>
                    Vous pouvez mettre à jour votre adresse et votre position GPS. Les autres informations doivent être modifiées par un administrateur.
                </small>
            </div>
        </div>

        <div class="d-flex justify-content-between">
            <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left me-1"></i>Retour
            </a>
            <button type="submit" class="btn btn-primary btn-modern">
                <i class="bi bi-save me-1"></i>Enregistrer les modifications
            </button>
        </div>
    </form>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
